# Решение проблем с SSH подключением

## Проблема: Connection timed out на порт 22

### Диагностика
- ✅ Сервер доступен (ping работает)
- ❌ Порт 22 недоступен
- ❌ Альтернативные порты (2222, 22022) тоже закрыты

## Возможные решения:

### 1. Проверьте правильный порт SSH

Спросите у администратора сервера или проверьте в панели управления хостингом:
- Какой порт используется для SSH?
- Возможно, это нестандартный порт (например, 22000, 22022, 2200)

### 2. Обновите конфигурацию SSH

Если порт другой, обновите `~/.ssh/config`:

```ssh-config
Host production
  HostName 45.12.239.174
  User root
  Port ВАШ_ПОРТ  # Замените на правильный порт
  IdentityFile ~/.ssh/id_rsa
  ServerAliveInterval 60
  ServerAliveCountMax 3
```

### 3. Проверьте Firewall

**На сервере:**
```bash
# Проверьте, запущен ли SSH
sudo systemctl status sshd

# Проверьте, какой порт слушает SSH
sudo netstat -tlnp | grep ssh
# или
sudo ss -tlnp | grep ssh

# Проверьте firewall правила
sudo ufw status
# или
sudo iptables -L -n
```

**Откройте порт SSH в firewall:**
```bash
sudo ufw allow 22/tcp
# или для другого порта
sudo ufw allow ВАШ_ПОРТ/tcp
```

### 4. Используйте VPN или туннель

Если сервер доступен только через VPN:
1. Подключитесь к VPN сначала
2. Затем подключайтесь через SSH

### 5. Проверьте доступ через веб-консоль

Многие хостинг-провайдеры предоставляют веб-консоль:
- Проверьте панель управления хостингом
- Используйте веб-SSH консоль для доступа
- Оттуда можно проверить настройки SSH

### 6. Альтернативные методы доступа

**Через веб-терминал хостинга:**
- Обычно доступен в панели управления
- Не требует открытого SSH порта

**Через SFTP клиент:**
- FileZilla, WinSCP
- Может использовать другой порт для SFTP

**Через облачный сервис:**
- Если сервер на VPS (DigitalOcean, AWS, etc.)
- Проверьте настройки Security Groups / Firewall в панели

## Что нужно узнать:

1. **Какой порт используется для SSH?**
   - Проверьте в панели управления хостингом
   - Или спросите у администратора

2. **Есть ли доступ через веб-консоль?**
   - Многие провайдеры предоставляют веб-SSH

3. **Нужен ли VPN для доступа?**
   - Некоторые серверы доступны только через VPN

4. **Какой хостинг-провайдер?**
   - Разные провайдеры имеют разные настройки

## Быстрая проверка через командную строку:

```powershell
# Проверка доступности портов
Test-NetConnection -ComputerName 45.12.239.174 -Port 22
Test-NetConnection -ComputerName 45.12.239.174 -Port 2222

# Попытка подключения с verbose выводом
ssh -v root@45.12.239.174
```

## Следующие шаги:

1. Узнайте правильный SSH порт у администратора
2. Обновите конфигурацию SSH с правильным портом
3. Попробуйте подключиться снова
